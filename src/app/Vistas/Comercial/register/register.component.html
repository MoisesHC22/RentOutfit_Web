<div class="main-container">
  <div class="left-panel">
    <div class="logo">
      <img src="RentOutfitLogo.png" alt="Rent Outfit Logo" />
    </div>
    <div class="gif-container">
      <ng-lottie [options]="animationOptions"></ng-lottie>
    </div>
  </div>
  
  <div class="right-panel">
    <div class="form-container">
      <h2 style="text-align: center; font-weight: bold;" *ngIf="paso === 1">Crea una cuenta</h2>
      <h2 style="text-align: center; font-weight: bold;" *ngIf="paso === 2">Información personal</h2>
      <h2 style="text-align: center; font-weight: bold;" *ngIf="paso === 3">Direccion</h2>

      <p style="text-align: center;">Para eventos especiales y festivales</p>
      
      <form [formGroup]="datos" (ngSubmit)="Registro()">
        <div *ngIf="paso === 1">
           <div class="row">
              <div class="form-group">
                <label for="email">Correo electrónico</label>
                <input type="email" id="email" name="email" formControlName="email" placeholder="correo@example.com"  maxlength="50"/>
               
                <div class="ContValidaciones" *ngIf="datos.get('email')?.invalid && (datos.get('email')?.touched || datos.get('email')?.dirty)">
                  <small *ngIf="datos.get('email')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
                  <small *ngIf="datos.get('email')?.errors?.['email']"class="Mensaje-Error">El correo debe tener un formato válido</small>
                </div>

              </div>
           </div>

           <div class="row">
             <div class="form-group">
               <label for="password">Contraseña</label>
               <input type="password" id="contrasena" name="contrasena" formControlName="contrasena" placeholder="**********" maxlength="15"/>
               
               <div class="ContValidaciones" *ngIf="datos.get('contrasena')?.errors?.contrasenaVal && datos.get('contrasena')?.invalid && (datos.get('contrasena')?.touched || datos.get('contrasena')?.dirty)">
                <small class="Mensaje-Error" *ngIf="datos.get('contrasena')?.errors?.['required']">Este campo es obligatorio!</small>
                <small class="Mensaje-Error" *ngIf="!datos.get('contrasena')?.errors?.contrasenaVal?.PrimeraLetraMayuscula">La primera letra debe ser mayúscula. </small>
                <small class="Mensaje-Error" *ngIf="!datos.get('contrasena')?.errors?.contrasenaVal?.AlmenosDosNumeros">Debe tener al menos dos números. </small>
                <small class="Mensaje-Error" *ngIf="!datos.get('contrasena')?.errors?.contrasenaVal?.Caracteres">Debe tener al menos 8 caracteres.</small>
 
               </div>
             </div>

             <div class="form-group">
               <label for="confirmPassword">Confirma contraseña</label>
               <input type="password" id="confirmPassword" formControlName="contrasenaValidar" name="confirmPassword" placeholder="**********" maxlength="12" />
              
               <div class="ContValidaciones" *ngIf="datos.errors?.contrasenaNoMatch && datos.get('contrasenaValidar')?.touched">
                  <small class="Mensaje-Error">Las contraseñas no coinciden.</small>
               </div>
              </div>
            </div>

            <button type="button" (click)="siguientePaso()" class="submit-button">Siguiente</button>
        </div>
      
         <div *ngIf="paso === 2">

          <div class="image-preview" id="imagePreview" (click)="cargarImagen()">
            <img id="previewImg" [src]="imagenPrevisualizacion" *ngIf="imagenPrevisualizacion" alt="Previsualización de la imagen"/>
            <span *ngIf="!statusImg" id="uploadLabel" class="upload-label" >Selecciona una foto de 2 MB</span>
            <input type="file" id="imageUpload" (change)="imagenSeleccionada($event)" accept="image/*" style="display: none;" formControlName="imagen" />
          </div>

         <div class="row">
          <div class="form-group">
            <label for="firstName">Nombre del cliente</label>
            <input type="text" id="nombre" name="nombre" formControlName="nombre" placeholder="Nombre" maxlength="50"/>
           
            <div class="ContValidaciones" *ngIf="datos.get('nombre')?.invalid && (datos.get('nombre')?.touched || datos.get('nombre')?.dirty)">
              <small *ngIf="datos.get('nombre')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
             </div>
          </div>

          <div class="form-group">
            <label for="lastNamePaterno">Apellido paterno</label>
            <input type="text" id="apellidoPaterno" name="apellidoPaterno" formControlName="apellidoPaterno" placeholder="Apellido paterno" maxlength="50"/>

            <div class="ContValidaciones" *ngIf="datos.get('apellidoPaterno')?.invalid && (datos.get('apellidoPaterno')?.touched || datos.get('apellidoPaterno')?.dirty)">
              <small *ngIf="datos.get('apellidoPaterno')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
             </div>
          </div>
        </div>

        <div class="row">
          <div class="form-group">
            <label for="lastNameMaterno">Apellido materno</label>
            <input type="text" id="apellidoMaterno" name="apellidoMaterno" formControlName="apellidoMaterno" placeholder="Apellido materno" maxlength="50"/>

            <div class="ContValidaciones" *ngIf="datos.get('apellidoMaterno')?.invalid && (datos.get('apellidoMaterno')?.touched || datos.get('apellidoMaterno')?.dirty)">
              <small *ngIf="datos.get('apellidoMaterno')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
             </div>
          </div>

          <div class="form-group">
            <label for="phone">Teléfono</label>
            <input type="text" id="telefono" name="telefono" formControlName="telefono" placeholder="Teléfono" maxlength="10"/>

            <div class="ContValidaciones" *ngIf="datos.get('telefono')?.invalid && (datos.get('telefono')?.touched || datos.get('telefono')?.dirty)">
              <small *ngIf="datos.get('telefono')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
             </div>
          </div>
        </div>

        <div class="row">
          <div class="form-group">
            <label for="genero">Genero</label>
            <select id="genero" name="genero" formControlName="genero">
               <option value="" disabled selected>Selecciona tu genero</option>
               <option *ngFor="let genero of GenerosList" [value]="genero.generoID">{{genero.nombreGenero}}</option>
            </select>

            <div class="ContValidaciones" *ngIf="datos.get('genero')?.invalid && (datos.get('genero')?.touched || datos.get('genero')?.dirty)">
              <small *ngIf="datos.get('genero')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
             </div>
          </div>
        </div>


      <div class="ContBtn">
           <button type="button" (click)="AnteriorPaso()" class="btnRegresar"> <fa-icon id="Icono" [icon]="faArrow"></fa-icon></button>
           <button type="button" (click)="siguientePaso()" class="btnContinuar">Siguiente</button>
      </div>

         </div>
        
        <div *ngIf="paso === 3">
          <div class="row">
              <div class="form-group">
                <label for="postalCode">Código postal</label>
                <input type="text" id="codigoPostal" name="codigoPostal" formControlName="codigoPostal"  placeholder="Código postal" maxlength="5"/>
              
                <div class="ContValidaciones" *ngIf="datos.get('codigoPostal')?.invalid && (datos.get('codigoPostal')?.touched || datos.get('codigoPostal')?.dirty)">
                  <small *ngIf="datos.get('codigoPostal')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
                 </div>
              </div>
            </div>
    
            <div class="row">
              <div class="form-group">
                <label for="colonia">Colonia</label>
                <input type="text" id="colonia" name="colonia" formControlName="colonia" placeholder="Colonia" maxlength="50"/>

                <div class="ContValidaciones" *ngIf="datos.get('colonia')?.invalid && (datos.get('colonia')?.touched || datos.get('colonia')?.dirty)">
                  <small *ngIf="datos.get('colonia')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
                 </div>
              </div>
            </div>
    
            <div class="row">
              <div class="form-group">
                <label for="calle">Calle</label>
                <input type="text" id="calle" name="calle" formControlName="calle" placeholder="Calle" maxlength="50"/>
                
                <div class="ContValidaciones" *ngIf="datos.get('calle')?.invalid && (datos.get('calle')?.touched || datos.get('calle')?.dirty)">
                  <small *ngIf="datos.get('calle')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
                 </div>
              </div>
            </div>
    
            <div class="row">
              <div class="form-group">
                <label for="numeroInterior">Número interior</label>
                <input type="text" id="noInt" name="noInt" formControlName="noInt" placeholder="Número interior" maxlength="3"/>

                <div class="ContValidaciones" *ngIf="datos.get('noInt')?.invalid && (datos.get('noInt')?.touched || datos.get('noInt')?.dirty)">
                  <small *ngIf="datos.get('noInt')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
                 </div>
              </div>
    
              <div class="form-group">
                <label for="numeroExterior">Número exterior</label>
                <input type="text" id="noExt" name="noExt" formControlName="noExt" placeholder="Número exterior" maxlength="3"/>

                <div class="ContValidaciones" *ngIf="datos.get('noExt')?.invalid && (datos.get('noExt')?.touched || datos.get('noExt')?.dirty)">
                  <small *ngIf="datos.get('noExt')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
                 </div>
              </div>
            </div>
    
            <div class="row">
              <div class="form-group">
                <label for="estado">Estado</label>
                <select id="estado" name="estado" (change)="EstadoSeleccionado($event)" formControlName="estado">
                   <option value="" disabled selected>Selecciona aqui</option>
                   <option *ngFor="let estado of EstadosList" [value]="estado.estadoID">{{estado.nombreEstado}}</option>
                </select>

                <div class="ContValidaciones" *ngIf="datos.get('estado')?.invalid && (datos.get('estado')?.touched || datos.get('estado')?.dirty)">
                  <small *ngIf="datos.get('estado')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
                 </div>
              </div>
            </div>
    
            <div class="row">
              <div class="form-group">
                <label for="municipio">Municipio</label>
                <select id="municipio" name="municipio" formControlName="municipio">
                  <option value="" disabled selected>Selecciona aqui</option>
                  <option *ngFor="let municipio of MunicipioList" [value]="municipio.nombreMunicipio">{{municipio.nombreMunicipio}}</option>
                </select>

                <div class="ContValidaciones" *ngIf="datos.get('municipio')?.invalid && (datos.get('municipio')?.touched || datos.get('municipio')?.dirty)">
                  <small *ngIf="datos.get('municipio')?.errors?.['required']" class="Mensaje-Error">Este campo es obligatorio!</small>
                 </div>
              </div>
            </div>
    
            <div class="checkbox-group">
              <input type="checkbox" id="terms" name="terms" />
              <label for="terms">Acepto los términos y condiciones</label>
            </div>
    
            <div class="ContBtn">
               <button type="button" (click)="AnteriorPaso()" class="btnRegresar"><fa-icon id="Icono" [icon]="faArrow"></fa-icon></button>
               
               <button type="submit" class="btnAgregar" 
               [disabled]="!datos.valid"
               [ngClass]="{'button-valid': datos.valid, 'button-invalid':!datos.valid}">Crear cuenta</button>
            
            </div>
        </div>

      </form>
    </div>
  </div>
</div>
